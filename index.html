<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kelas 5A - We're Loud, We're Loving</title>
    <link rel="icon" type="image/png" href="5a.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #ff4da6;
            --secondary: #ff99cc;
            --light: #ffe6f2;
            --dark: #5c3d4f;
            --accent: #ffd6e0;
            --ai-primary: #10a37f;
            --ai-dark: #1a7f64;
            --ai-light: #e6f3f0;
            --spotify-green: #1DB954;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Quicksand', sans-serif;
            background: linear-gradient(135deg, #ffd6e0, #ffe6f2);
            color: var(--dark);
            line-height: 1.6;
        }
        
        header {
            text-align: center;
            padding: 60px 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary)), url('5a.png') center/cover no-repeat;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
            opacity: 0.3;
        }
        
        header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        header p {
            font-size: 1.4em;
            font-style: italic;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px; /* Increased gap for more space */
            margin: 40px 0; /* Increased margin for more space */
        }
        
        .card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            padding: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            margin-bottom: 40px; /* Added margin bottom for more space between cards */
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.15);
        }
        
        h2 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.8em;
            position: relative;
            display: inline-block;
        }
        
        h2::after {
            content: "";
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 50%;
            height: 3px;
            background: var(--secondary);
            border-radius: 3px;
        }
        
        .teachers {
            text-align: center;
            grid-column: 1 / -1;
        }
        
        .teacher-list {
            display: flex;
            justify-content: center;
            gap: 50px;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        
        .teacher {
            background: var(--light);
            padding: 25px 35px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 1.5em;
            color: var(--dark);
            box-shadow: 0 6px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .teacher::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--primary);
        }
        
        .teacher:hover {
            transform: scale(1.05);
            background: var(--accent);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        }
        
        .students ul {
            list-style: none;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
        }
        
        .students li {
            background: var(--light);
            padding: 10px 15px;
            border-radius: 12px;
            transition: all 0.2s ease;
            text-align: center;
        }
        
        .students li:hover {
            transform: scale(1.05);
            background: var(--accent);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .song {
            text-align: center;
            grid-column: 1 / -1;
        }
        
        .spotify-player {
            width: 100%;
            max-width: 600px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin: 0 auto;
        }
        
        .ai-section {
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            padding: 0;
            margin-top: 50px; /* Increased margin top for more space */
            overflow: hidden;
        }
        
        .ai-header {
            background: linear-gradient(135deg, var(--ai-primary), var(--ai-dark));
            color: white;
            padding: 20px 30px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .ai-header h2 {
            color: white;
            margin: 0;
        }
        
        .ai-header h2::after {
            display: none;
        }
        
        .ai-icon {
            font-size: 1.8em;
        }
        
        .ai-container {
            display: flex;
            flex-direction: column;
            height: 500px;
        }
        
        .ai-chat {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
            background: #f9f9f9;
        }
        
        .message {
            max-width: 85%;
            padding: 15px 20px;
            border-radius: 18px;
            line-height: 1.5;
            position: relative;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .user-message {
            background: var(--ai-primary);
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .ai-message {
            background: white;
            align-self: flex-start;
            border-bottom-left-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            border: 1px solid #eee;
        }
        
        .message-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
            font-size: 0.9em;
        }
        
        .user-message .message-header {
            color: rgba(255,255,255,0.8);
        }
        
        .ai-message .message-header {
            color: var(--ai-primary);
            font-weight: 600;
        }
        
        .message-time {
            font-size: 0.8em;
            opacity: 0.7;
            margin-top: 5px;
        }
        
        .ai-input-container {
            display: flex;
            gap: 10px;
            padding: 20px;
            border-top: 1px solid #eee;
            background: white;
        }
        
        .ai-input {
            flex: 1;
            padding: 15px 20px;
            border: 1px solid #ddd;
            border-radius: 12px;
            font-family: 'Quicksand', sans-serif;
            font-size: 1em;
            resize: none;
            height: 60px;
            transition: border 0.3s ease;
        }
        
        .ai-input:focus {
            outline: none;
            border-color: var(--ai-primary);
            box-shadow: 0 0 0 2px rgba(16, 163, 127, 0.2);
        }
        
        .ai-button {
            background: var(--ai-primary);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 0 25px;
            font-family: 'Quicksand', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .ai-button:hover {
            background: var(--ai-dark);
            transform: scale(1.02);
        }
        
        .ai-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .ai-actions {
            display: flex;
            gap: 10px;
            padding: 0 20px 15px;
            background: white;
        }
        
        .ai-action-btn {
            background: transparent;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 8px 15px;
            font-family: 'Quicksand', sans-serif;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .ai-action-btn:hover {
            background: #f5f5f5;
        }
        
        .suggestion-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 0 20px 15px;
            background: white;
        }
        
        .suggestion-chip {
            background: var(--ai-light);
            border: 1px solid var(--ai-primary);
            color: var(--ai-dark);
            border-radius: 20px;
            padding: 8px 15px;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .suggestion-chip:hover {
            background: var(--ai-primary);
            color: white;
        }
        
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 10px 15px;
            color: #666;
            font-style: italic;
        }
        
        .typing-dots {
            display: flex;
            gap: 3px;
        }
        
        .typing-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: #999;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) { animation-delay: 0s; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes typingAnimation {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-5px); }
        }
        
        footer {
            text-align: center;
            padding: 30px 20px;
            margin-top: 40px;
            background: var(--accent);
            color: var(--dark);
            border-top: 3px dashed var(--secondary);
        }
        
        @media (max-width: 768px) {
            header h1 {
                font-size: 2.2em;
            }
            
            header p {
                font-size: 1.1em;
            }
            
            .grid {
                grid-template-columns: 1fr;
            }
            
            .students ul {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
            
            .teacher {
                font-size: 1.3em;
                padding: 20px 25px;
            }
            
            .teacher-list {
                gap: 20px;
            }
            
            .ai-container {
                height: 400px;
            }
            
            .message {
                max-width: 90%;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Kelas 5A ü©∑</h1>
        <p>"We're loud, we're loving, we're 5A."</p>
    </header>
    
    <div class="container">
        <section class="card teachers">
            <h2>Wali Kelas üë©‚Äçüè´</h2>
            <div class="teacher-list">
                <div class="teacher">Ms Kristina</div>
                <div class="teacher">Ms Krisfani</div>
            </div>
        </section>
        
        <section class="card song">
            <h2>üéß Lagu Favorit 5A</h2>
            <div class="spotify-player">
                <iframe src="https://open.spotify.com/embed/track/5odlY52u43F5BjByhxg7wg?utm_source=generator" 
                        width="100%" height="152" frameBorder="0" allowfullscreen="" 
                        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
                        loading="lazy">
                </iframe>
            </div>
        </section>
        
        <section class="card students">
            <h2>Daftar Siswa üå∏</h2>
            <ul>
                <li>Aldrich</li>
                <li>Sam</li>
                <li>Kiera</li>
                <li>Nelson</li>
                <li>Marsha</li>
                <li>Gilbert</li>
                <li>Erin</li>
                <li>Vincent</li>
                <li>Russell</li>
                <li>Wayne</li>
                <li>Chelsey</li>
                <li>Jonah</li>
                <li>Davina</li>
                <li>Chio</li>
                <li>Gio</li>
                <li>Sean</li>
                <li>Evelyn</li>
                <li>Marycel</li>
                <li>Charlene</li>
                <li>Claire</li>
                <li>Krisna</li>
                <li>Gisel</li>
                <li>Amira</li>
            </ul>
        </section>
        
        <section class="ai-section">
            <div class="ai-header">
                <div class="ai-icon">
                    <i class="fas fa-robot"></i>
                </div>
                <h2>FiveAI - Smart Class Assistant</h2>
            </div>
            
            <div class="ai-container">
                <div class="ai-chat" id="chat-container">
                    <div class="message ai-message">
                        <div class="message-header">
                            <i class="fas fa-robot"></i>
                            <span>FiveAI</span>
                        </div>
                        Hello! I'm FiveAI, your intelligent class assistant. I can help you with homework, answer questions, explain concepts, and much more. What would you like to know?
                    </div>
                </div>
                
                <div class="suggestion-chips">
                    <div class="suggestion-chip" data-prompt="What is the quadratic formula?">Quadratic formula</div>
                    <div class="suggestion-chip" data-prompt="Explain photosynthesis">Photosynthesis</div>
                    <div class="suggestion-chip" data-prompt="Help me with math homework">Math help</div>
                    <div class="suggestion-chip" data-prompt="Tell me about our class">About our class</div>
                </div>
                
                <div class="ai-actions">
                    <button class="ai-action-btn" id="clear-chat">
                        <i class="fas fa-trash"></i> Clear Chat
                    </button>
                    <button class="ai-action-btn" id="export-chat">
                        <i class="fas fa-download"></i> Export Chat
                    </button>
                </div>
                
                <div class="ai-input-container">
                    <textarea class="ai-input" id="user-input" placeholder="Ask FiveAI anything..."></textarea>
                    <button class="ai-button" id="send-button">
                        <i class="fas fa-paper-plane"></i> Send
                    </button>
                </div>
            </div>
        </section>
    </div>
    
    <footer>
        ‚ú® Dibuat dengan cinta oleh Kelas 5A ‚ú®
    </footer>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const chatContainer = document.getElementById('chat-container');
            const userInput = document.getElementById('user-input');
            const sendButton = document.getElementById('send-button');
            const clearChatBtn = document.getElementById('clear-chat');
            const exportChatBtn = document.getElementById('export-chat');
            const suggestionChips = document.querySelectorAll('.suggestion-chip');
            
            let conversationHistory = [];
            let isAIEnabled = true;
            
            function addMessage(text, isUser = false, timestamp = new Date()) {
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('message');
                messageDiv.classList.add(isUser ? 'user-message' : 'ai-message');
                
                const timeString = timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                
                messageDiv.innerHTML = `
                    <div class="message-header">
                        <i class="fas ${isUser ? 'fa-user' : 'fa-robot'}"></i>
                        <span>${isUser ? 'You' : 'FiveAI'}</span>
                    </div>
                    ${text}
                    <div class="message-time">${timeString}</div>
                `;
                
                chatContainer.appendChild(messageDiv);
                chatContainer.scrollTop = chatContainer.scrollHeight;
                
                conversationHistory.push({
                    role: isUser ? 'user' : 'assistant',
                    content: text,
                    timestamp: timestamp
                });
            }
            
            function showTypingIndicator() {
                const typingDiv = document.createElement('div');
                typingDiv.classList.add('typing-indicator');
                typingDiv.id = 'typing-indicator';
                typingDiv.innerHTML = `
                    <div>FiveAI is thinking</div>
                    <div class="typing-dots">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                `;
                chatContainer.appendChild(typingDiv);
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }
            
            function hideTypingIndicator() {
                const typingIndicator = document.getElementById('typing-indicator');
                if (typingIndicator) {
                    typingIndicator.remove();
                }
            }
            
            async function callAIService(userMessage) {
                if (!isAIEnabled) {
                    return generateFallbackResponse(userMessage);
                }
                
                try {
                    const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': 'Bearer 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',
                            'HTTP-Referer': window.location.origin,
                            'X-Title': 'Class Assistant'
                        },
                        body: JSON.stringify({
                            model: 'openai/gpt-3.5-turbo',
                            messages: [
                                {
                                    role: 'system',
                                    content: 'You are FiveAI, a helpful and friendly AI assistant for a 5th grade class. Provide clear, educational explanations appropriate for elementary students. Be concise but thorough.'
                                },
                                ...conversationHistory.slice(-6).map(msg => ({
                                    role: msg.role,
                                    content: msg.content
                                })),
                                {
                                    role: 'user',
                                    content: userMessage
                                }
                            ],
                            max_tokens: 500,
                            temperature: 0.7
                        })
                    });
                    
                    if (!response.ok) {
                        throw new Error('Service temporarily unavailable');
                    }
                    
                    const data = await response.json();
                    return data.choices[0].message.content;
                    
                } catch (error) {
                    console.log('AI service unavailable, using fallback');
                    return generateFallbackResponse(userMessage);
                }
            }
            
            function generateFallbackResponse(userMessage) {
                const lowerMessage = userMessage.toLowerCase();
                
                if (lowerMessage.includes('quadratic') || lowerMessage.includes('quadratic formula')) {
                    return "The quadratic formula is used to solve quadratic equations (equations with x¬≤). The formula is: x = [-b ¬± ‚àö(b¬≤ - 4ac)] / 2a. You use it when you have an equation like ax¬≤ + bx + c = 0. Just plug in the values of a, b, and c from your equation!";
                }
                
                if (lowerMessage.includes('photosynthesis')) {
                    return "Photosynthesis is how plants make their own food using sunlight! Here's how it works: Plants take in carbon dioxide from the air and water from the soil. Using sunlight and chlorophyll (the green pigment in leaves), they convert these into glucose (sugar) for energy and oxygen that they release back into the air.";
                }
                
                if (lowerMessage.includes('math') || lowerMessage.includes('calculate')) {
                    const mathMatch = userMessage.match(/(\d+)\s*([+\-*/])\s*(\d+)/);
                    if (mathMatch) {
                        const num1 = parseInt(mathMatch[1]);
                        const operator = mathMatch[2];
                        const num2 = parseInt(mathMatch[3]);
                        
                        let result;
                        switch(operator) {
                            case '+': result = num1 + num2; break;
                            case '-': result = num1 - num2; break;
                            case '*': result = num1 * num2; break;
                            case '/': result = num1 / num2; break;
                            default: result = "I can't solve that operation";
                        }
                        
                        return `The answer to ${num1} ${operator} ${num2} is ${result}.`;
                    }
                    return "I can help with math problems! Try asking me something specific like 'What is 15 √ó 4?' or 'Help me solve 2x + 5 = 11'.";
                }
                
                if (lowerMessage.includes('class') || lowerMessage.includes('5a') || lowerMessage.includes('student') || lowerMessage.includes('teacher')) {
                    return "Class 5A has 23 amazing students and 2 wonderful teachers: Ms Kristina and Ms Krisfani. Our class motto is 'We're loud, we're loving, we're 5A!' We're known for being energetic, creative, and supportive of each other.";
                }
                
                if (lowerMessage.includes('what is') || lowerMessage.includes('explain') || lowerMessage.includes('how does')) {
                    const explanations = [
                        "That's a great question! It's a fascinating topic that scientists continue to study. The key thing to remember is that it involves multiple processes working together in harmony.",
                        "I'd be happy to explain that! In simple terms, it works through a combination of factors that interact with each other. Understanding the basic principles helps us see how amazing our world is!",
                        "That's an interesting topic! Essentially, it involves natural processes that follow specific rules and patterns. Learning about it helps us understand how things work in our universe."
                    ];
                    return explanations[Math.floor(Math.random() * explanations.length)];
                }
                
                const intelligentResponses = [
                    "That's an interesting question! Based on my knowledge, I think the most important aspect is understanding the fundamental concepts behind it.",
                    "I've been analyzing that topic. It seems like there are several key factors to consider, and the solution often involves looking at the problem from different angles.",
                    "That's a thoughtful question. From what I understand, the best approach is to break it down into smaller, more manageable parts and tackle each one systematically.",
                    "I appreciate you asking that. After considering the information, it appears that the answer involves both theoretical understanding and practical application.",
                    "That's a complex question. My analysis suggests that we need to consider both the immediate context and the broader implications to fully understand it."
                ];
                
                return intelligentResponses[Math.floor(Math.random() * intelligentResponses.length)];
            }
            
            async function sendMessage() {
                const message = userInput.value.trim();
                if (!message) return;
                
                addMessage(message, true);
                userInput.value = '';
                sendButton.disabled = true;
                
                showTypingIndicator();
                
                const response = await callAIService(message);
                
                hideTypingIndicator();
                
                addMessage(response);
                
                sendButton.disabled = false;
                userInput.focus();
            }
            
            function clearChat() {
                if (confirm("Are you sure you want to clear the conversation?")) {
                    chatContainer.innerHTML = `
                        <div class="message ai-message">
                            <div class="message-header">
                                <i class="fas fa-robot"></i>
                                <span>FiveAI</span>
                            </div>
                            Hello! I'm FiveAI, your intelligent class assistant. I can help you with homework, answer questions, explain concepts, and much more. What would you like to know?
                        </div>
                    `;
                    conversationHistory = [];
                }
            }
            
            function exportChat() {
                let chatText = "FiveAI Conversation\n";
                chatText += "Date: " + new Date().toLocaleString() + "\n\n";
                
                conversationHistory.forEach(msg => {
                    const sender = msg.role === 'user' ? 'You' : 'FiveAI';
                    const time = msg.timestamp.toLocaleTimeString();
                    chatText += `[${time}] ${sender}: ${msg.content}\n\n`;
                });
                
                const blob = new Blob([chatText], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `fiveai-chat-${new Date().toISOString().slice(0, 10)}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }
            
            sendButton.addEventListener('click', sendMessage);
            
            userInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
            
            userInput.addEventListener('input', function() {
                sendButton.disabled = !userInput.value.trim();
            });
            
            clearChatBtn.addEventListener('click', clearChat);
            exportChatBtn.addEventListener('click', exportChat);
            
            suggestionChips.forEach(chip => {
                chip.addEventListener('click', function() {
                    userInput.value = this.getAttribute('data-prompt');
                    userInput.focus();
                });
            });
        });
    </script>
</body>
</html>